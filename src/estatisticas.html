<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Grupo 04">
  <meta name="description" content="Estatísticas do Ensino">
  <meta name="keywords" content="educação, estatísticas, dados, ensino">
  <link rel="stylesheet" href="estilo.css">
  <title>Estatísticas do Ensino</title>
</head>
<body>
  <header>
        <div>
      <a href="https://www.umaia.pt/" target="_blank" rel="noopener">
        <img src="https://repositorio.umaia.pt/assets/rcaap/images/logo.png" alt="UMAIA" style="height: 80px;" />
      </a>
    </div>
    <div class="logo">
      <h1 style="color:black">Dados Estatísticos</h1>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">História Geral</a></li>
        <li><a href="portugal.html">História em Portugal</a></li>
        <li><a href="curiosidades.html">Curiosidades</a></li>
        <li><a href="estatisticas.html">Estatísticas</a></li>
      </ul>
    </nav>
  </header>
  <div class="banner">
  <h1>Descubra a evolução, curiosidades e informações sobre o nosso sistema educativo</h1>
</div>

  <main>
    <h2>Números que Contam a Educação</h2>

    <p id="mensagem">Clique no botão para carregar os cursos disponíveis.</p>

    <button id="btn-toggle-tabela">Mostrar Cursos</button>
    <button id="btn-alterar-texto">Alterar Mensagem</button>

    <div id="tabela-container" style="display:none;">
      <!-- Tabela carregada aqui via JS -->
    </div>
  </main>

<footer>
  <div class="footer-content">
    <div class="footer-info">
      <p class="footer-title">Grupo 4 - Projeto de TI</p>
      <ul>
        <li>Marta Vieira A046756</li>
        <li>Juliana Moreira A047188</li>
        <li>Felipe Castilho A047152</li>
      </ul>
    </div>
    
    <div class="footer-links" style="flex: 1 1 200px; margin-bottom: 20px;">
      <h4>Links Úteis</h4>
      <ul>
        <li>
          <a href="https://github.com/inf2425tig04/trabalho_ti/blob/main/Capitulo%201.md">
            <img src="https://cdn-icons-png.flaticon.com/24/1946/1946429.png" alt="" style="width: 18px; height: 18px;">
            Sobre
          </a>
        </li>
        <li>
          <a href="https://inf2425tig01.netlify.app/">
            <img src="https://cdn-icons-png.flaticon.com/24/2921/2921222.png" alt="" style="width: 18px; height: 18px;">
            Projeto
          </a>
        </li>
        <li>
          <a href="https://github.com/inf2425tig04/trabalho_ti/" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/24/733/733553.png" alt="" style="width: 18px; height: 18px;">
            GitHub
          </a>
        </li>
        <li>
          <a href="cursos.xml" download>
            <img src="https://cdn-icons-png.flaticon.com/24/136/136522.png" alt="Download XML" style="width: 18px; height: 18px;">
            Download XML
          </a>
        </li>
        <li>
          <a href="cursos_schema.xsd" download>
            <img src="https://cdn-icons-png.flaticon.com/24/136/136521.png" alt="Download XSD" style="width: 18px; height: 18px;">
            Download XSD
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>



  <script>
    const btnToggle = document.getElementById('btn-toggle-tabela');
    const btnAlterarTexto = document.getElementById('btn-alterar-texto');
    const tabelaContainer = document.getElementById('tabela-container');
    const mensagem = document.getElementById('mensagem');

    let tabelaVisivel = false;
    let xmlDados = null;

    // Função para carregar XML via fetch
    async function carregarXML() {
      try {
        const response = await fetch('cursos.xml');
        if (!response.ok) throw new Error('Erro ao carregar o XML.');
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, "application/xml");
        return xmlDoc;
      } catch (error) {
        mensagem.textContent = "Erro: " + error.message;
        return null;
      }
    }

    // Função para criar tabela HTML a partir do XML
    function criarTabela(xmlDoc) {
      if (!xmlDoc) return;

      const cursos = xmlDoc.getElementsByTagName('curso');
      if (cursos.length === 0) {
        mensagem.textContent = "Nenhum curso encontrado no XML.";
        return;
      }

      let tabela = document.createElement('table');
      tabela.id = 'tabela-cursos';

      // Cabeçalho da tabela
      let thead = document.createElement('thead');
      thead.innerHTML = `
        <tr>
          <th>ID</th>
          <th>Nome do Curso</th>
          <th>Nível</th>
          <th>Instituição</th>
          <th>Duração</th>
          <th>Professores</th>
        </tr>`;
      tabela.appendChild(thead);

      let tbody = document.createElement('tbody');

      for (let curso of cursos) {
        const id = curso.getAttribute('id') || '';
        const nome = curso.getElementsByTagName('nome')[0]?.textContent || '';
        const nivel = curso.getElementsByTagName('nivel')[0]?.textContent || '';
        const instituicao = curso.getElementsByTagName('instituicao')[0]?.textContent || '';
        const duracao = curso.getElementsByTagName('duracao')[0]?.textContent || '';

        // Profissionais
        const professores = curso.getElementsByTagName('professor');
        let listaProfessores = [];
        for (let prof of professores) {
          const nomeProf = prof.getElementsByTagName('nome')[0]?.textContent || '';
          const espec = prof.getElementsByTagName('especialidade')[0]?.textContent || '';
          listaProfessores.push(`${nomeProf} (${espec})`);
        }

        let tr = document.createElement('tr');

        tr.innerHTML = `
          <td>${id}</td>
          <td>${nome}</td>
          <td>${nivel}</td>
          <td>${instituicao}</td>
          <td>${duracao}</td>
          <td><ul>${listaProfessores.map(p => `<li>${p}</li>`).join('')}</ul></td>
        `;
        tbody.appendChild(tr);
      }

      tabela.appendChild(tbody);
      return tabela;
    }

    // Manipulação do botão para mostrar/esconder a tabela
    btnToggle.addEventListener('click', async () => {
      if (!xmlDados) {
        xmlDados = await carregarXML();
      }

      if (!tabelaVisivel) {
        const tabela = criarTabela(xmlDados);
        if (tabela) {
          tabelaContainer.innerHTML = '';  // Limpa conteúdo
          tabelaContainer.appendChild(tabela);
          tabelaContainer.style.display = 'block';
          btnToggle.textContent = 'Esconder Cursos';
          mensagem.textContent = 'Tabela de cursos carregada.';
          mensagem.style.color = 'green';
          tabelaVisivel = true;
        }
      } else {
        tabelaContainer.style.display = 'none';
        btnToggle.textContent = 'Mostrar Cursos';
        mensagem.textContent = 'Clique no botão para carregar os cursos disponíveis.';
        mensagem.style.color = 'black';
        tabelaVisivel = false;
      }
    });

    // Botão para alterar o texto e estilo do parágrafo
    btnAlterarTexto.addEventListener('click', () => {
      mensagem.textContent = "Você alterou a mensagem com sucesso!";
      mensagem.style.color = '#e91e63';
      mensagem.style.fontStyle = 'italic';
    });
  </script>
</body>
</html>